<section class="py-28  ">
    <div class="max-w-screen-xl mx-auto   ">
        <div class="container  mx-auto  flex justify-center items-center">
              
            <form class="shadow-2xl shadow-slate-500 bg-slate-200 p-3 w-10/12 lg:w-1/2 " [formGroup]="registerForm" (ngSubmit)="register()">
                <div class="my-3">
                    <label for="name" class="mb-2  capitalize font-bold">Name:</label>
                    <input type="text" id="name" class=" form-control" formControlName="name" placeholder="ex:rabab"
                    [ngClass]="{
                       'valid':!registerForm.get('name')?.errors  && (registerForm.get('name')?.touched ||  registerForm.get('name')?.dirty ),
                       'invalid':registerForm.get('name')?.errors  && (registerForm.get('name')?.touched ||  registerForm.get('name')?.dirty ) ,
                    }"
                    >
                    @if(registerForm.get('name')?.errors && registerForm.get('name')?.touched){
                        <div class="bg-red-400 text-lg p-2 rounded my-3 font-semibold shadow-lg">
                            @if(registerForm.get('name')?.getError('required')){<p>name must be required</p>}
                            @else if(registerForm.get('name')?.getError('minlength')){<p>minLength of name must  be 3 letters</p>}
                            @else if(registerForm.get('name')?.getError('maxlength')){<p>maxLength of name must be 10 letters</p>}
                        </div>
                    }
                </div>

                <div class="my-4">
                    <label for="email" class="mb-2  capitalize  font-bold">email:</label>
                    <input type="email" id="email" class="form-control" formControlName="email" placeholder="ex:rabab@gmail.com"
                    [ngClass]="{
                        'valid':!registerForm.get('email')?.errors  && (registerForm.get('email')?.touched ||  registerForm.get('email')?.dirty ),
                        'invalid':registerForm.get('email')?.errors  && (registerForm.get('email')?.touched ||  registerForm.get('email')?.dirty ) ,
                     }"
                    >
                    @if(registerForm.get('email')?.errors && registerForm.get('email')?.touched){
                        <div class="bg-red-400 text-lg p-2 rounded my-3 font-semibold shadow-lg">
                            @if(registerForm.get('email')?.getError('required')){<p>email must be required</p>}
                            @else if(registerForm.get('email')?.getError('email')){<p>email formate is not correct</p>}
                           
                        </div>
                    }
                </div>

                <div class="my-4">
                    <label for="password" class="mb-2  capitalize  font-bold">password:</label>
                    <input type="password" id="password" class="form-control" formControlName="password" placeholder="ex:123123"
                    [ngClass]="{
                        'valid':!registerForm.get('password')?.errors  && (registerForm.get('password')?.touched ||  registerForm.get('password')?.dirty ),
                        'invalid':registerForm.get('password')?.errors  && (registerForm.get('password')?.touched ||  registerForm.get('password')?.dirty ) ,
                     }"
                    >
                    @if(registerForm.get('password')?.errors && registerForm.get('password')?.touched){
                        <div class="bg-red-400 text-lg p-2 rounded my-3 font-semibold shadow-lg">
                            @if(registerForm.get('password')?.getError('required')){<p>password must be required</p>}
                            @else if(registerForm.get('password')?.getError('pattern')){<p>password formate is not correct</p>}
                           
                        </div>
                    }
                </div>

                <div class="my-4">
                    <label for="rePassword" class="mb-2   font-bold">rePassword:</label>
                    <input type="Password" id="rePassword" class="form-control" formControlName="rePassword" placeholder="ex:123123"
                    [ngClass]="{
                        'valid':!registerForm.getError('missMatch') && (registerForm.get('rePassword')?.touched ||  registerForm.get('rePassword')?.dirty ),
                        'invalid':registerForm.getError('missMatch') && (registerForm.get('rePassword')?.touched ||  registerForm.get('rePassword')?.dirty ) ,
                    }"
                    >
                    @if(registerForm.getError('misMatch') && registerForm.get('rePassword')?.touched){
                        <div class="bg-red-400 text-lg p-2 rounded my-3 font-semibold shadow-lg">
                           <p>confirm password is not correct</p>
                        </div>
                    }
                </div>

                <div class="my-4">
                    <label for="phone" class="mb-2  capitalize   font-bold">phone:</label>
                    <input type="tel" id="phone" class="form-control" formControlName="phone" placeholder="ex:123123"
                    [ngClass]="{
                        'valid':!registerForm.get('phone')?.errors  && (registerForm.get('phone')?.touched ||  registerForm.get('phone')?.dirty ),
                        'invalid':registerForm.get('phone')?.errors  && (registerForm.get('phone')?.touched ||  registerForm.get('phone')?.dirty ) ,
                    }"
                    >
                    @if(registerForm.get('phone')?.errors && registerForm.get('phone')?.touched){
                        <div class="bg-red-400 text-lg p-2 rounded my-3 font-semibold shadow-lg">
                            @if(registerForm.get('phone')?.getError('required')){<p>phone must be required</p>}
                            @else if(registerForm.get('phone')?.getError('pattern')){<p>phone formate is not correct</p>}
                           
                        </div>
                    }
                </div>

                @if (errorText) 
                {
                    <div class="my-4 w-full ">
                        <p class="text-center w-full md:w-1/2 whitespace-nowrap font-bold text-lg rounded-lg bg-teal-500 mx-auto p-2">{{errorText}}</p>
                    </div>

                }

                <button [disabled]="registerForm.invalid" type="submit" class="w-1/2 cursor-pointer p-2 shadow-2xl  rounded-lg text-lg block mx-auto text-black font-bold"
                [ngClass]="{
                    'bg-green-500  hover:shadow-none': !registerForm.invalid, 
                    'bg-gray-300': registerForm.invalid
                }" 
                >Register
                    @if (loading === true) {
                        <span><i class="fa-solid fa-circle-notch fa-spin"></i></span>
                    }
                </button>

            </form>
            
        </div>
    </div>
</section>
